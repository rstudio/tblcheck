<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="An introduction to using the tblcheck package for automatic feedback for grading common problems in tables.
">
<title>Get started with tblcheck • tblcheck</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.5/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.5/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Get started with tblcheck">
<meta property="og:description" content="An introduction to using the tblcheck package for automatic feedback for grading common problems in tables.
">
<meta property="og:image" content="https://pkgs.rstudio.com/tblcheck/v0.3.1/reference/figures/logo.png">
<meta property="og:image:alt" content="tblcheck package">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@rstudio">
<meta name="twitter:site" content="@rstudio">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tblcheck</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/tblcheck.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/examples.html">Examples</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstudio/tblcheck/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get started with tblcheck</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstudio/tblcheck/blob/HEAD/vignettes/tblcheck.Rmd" class="external-link"><code>vignettes/tblcheck.Rmd</code></a></small>
      <div class="d-none name"><code>tblcheck.Rmd</code></div>
    </div>

    
    
<style type="text/css">
/* tweak alert code colors for pkgdown */
.alert code {
  background-blend-mode: lighten;
  background-color: rgba(255, 255, 255, 0.5);
  background-image: none;
  color: inherit;
}
</style>
<style type="text/css">
/* tweak alerts for both pkgdown and standard vignettes */
.alert > :last-child {
  margin-bottom: 0;
}
</style>
<style type="text/css">
.callout {
  padding: 1.5rem 1.5rem 1.5rem 80px;
  margin: 1em 0;
  background-size: 40px;
  background-repeat: no-repeat;
  background-position: 20px 1.5em;
  min-height: 80px;
  position: relative;
  border: 2px solid;
}

.callout::before {
  content: "!";
  display: flex;
  position: absolute;
  top: 0;
  left: 0;
  background-repeat: no-repeat;
  background-size: contain;
  width: 40px;
  height: 40px;
  transform: translate(20px, 20px) scale(1);
  transition: transform 0.15s linear, background-color 0.2s linear;
  font-weight: bold;
  font-size: 2em;
  background-color: #486181;
  color: white;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

.callout:first-child {
  margin-top: 0;
}

.callout p:last-child {
  margin-bottom: 0;
}

.callout {
  border-color: #b5c1d2;
}

.callout p, .callout ol, .callout ul {
  color: #486181;
}

.callout h3, .callout h4 {
  color: #294263;
}

.callout p code, .callout ol code, .callout ul code, .callout h3 code, .callout h4 code {
  background-color: #e9f2fd;
  color: #294263;
}

.callout blockquote {
  border-color: #b5c1d1;
}

@media only screen and (max-width: 400px) {
  .callout::before {
    transform: translate(-10px, -15px) scale(0.9);
  }
  .callout {
    padding-left: 1.5rem;
    padding-top: 1.5rem;
    margin-top: 1.5rem;
  }
}

</style>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<div class="section level3">
<h3 id="introducing-tblcheck">Introducing tblcheck<a class="anchor" aria-label="anchor" href="#introducing-tblcheck"></a>
</h3>
<p>tblcheck works with <a href="https://pkgs.rstudio.com/gradethis/" class="external-link">gradethis</a> to help
instructors compare students’ exercise results with intended solutions
in <a href="https://rstudio.github.io/learnr/" class="external-link">learnr</a> tutorials. If
you are new to grading learnr tutorials, we recommend that you <a href="https://pkgs.rstudio.com/gradethis/articles/gradethis.html" class="external-link">get
comfortable with gradethis</a> before incorporating tblcheck into your
tutorials.</p>
<p>tblcheck provides four levels of grading:</p>
<ol style="list-style-type: decimal">
<li>For fully automatic grading as a drop-in replacement for
<code><a href="https://pkgs.rstudio.com/gradethis/reference/grade_this.html" class="external-link">gradethis::grade_this()</a></code>, use
<code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> or
<code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code>.</li>
<li>To integrate tblcheck into existing grading code, you can use
<code><a href="../reference/tbl_check.html">tbl_grade()</a></code> or <code><a href="../reference/vec_check.html">vec_grade()</a></code> for specific
automated checks.</li>
<li>You can directly call the <a href="#specific-grading-functions">specialized individual grading
functions</a> that power the higher-level functions.</li>
<li>Finally, you can check for table and vector problems to <a href="#custom-mistake-handling">create your own custom
feedback</a>.</li>
</ol>
<p>The most common use case for tblcheck is to provide automatic
feedback for <a href="#grading-tables">common problems in tables</a>.
Because the columns of data frames in R are vectors, tblcheck can also
provide feedback for <a href="#grading-vectors">common problems in
vectors</a> with <code><a href="../reference/vec_check.html">vec_grade()</a></code>.</p>
<p>These all-in-one grading functions check for a set of possible
problems, or differences, between the exercise solution and the
student’s table or vector. You can <a href="#skipping-tests">control
which checks are applied</a> with the arguments of these functions, or
you can <a href="#specific-grading-functions">directly call individual
grading functions</a>. The table grading functions are prefixed with
<code>tbl_grade_</code> and the vector grading functions prefixed with
<code>vec_grade_</code>.</p>
<p>For complete control over the feedback presented to users, each
<code>tbl_grade_</code> or <code>vec_grade_</code> function is paired
with a <code>tbl_check_</code> or <code>vec_check_</code> counterpart
that finds problems and returns an object that you can use to <a href="#custom-mistake-handling">create custom feedback</a>.</p>
</div>
<div class="section level3">
<h3 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h3>
<p>To use tblcheck in a learnr tutorial, load tblcheck after learnr and
gradethis in the <code>setup</code> chunk of your tutorial:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup}</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="in">library(learnr)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="in">library(gradethis)</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="in">library(tblcheck)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>Then, ensure your exercise has a <code>-solution</code> chunk and
choose one of the following grading functions to grade your
exercise:</p>
<ul>
<li>
<p>If the solution is a <strong>table</strong>, use
<code><a href="../reference/grade_this_table.html">grade_this_table()</a></code></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r ex-check}</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this_table()</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>or use <code><a href="../reference/tbl_check.html">tbl_grade()</a></code> in existing grading code.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r ex-check}</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this({</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="in">  pass_if_equal()</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="in">  tbl_grade()</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="in">  pass()</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
</li>
<li>
<p>If the solution is a <strong><em>column</em> in a table</strong>,
use <code>grade_this_column()</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r ex-check}</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this_column("eruptions")</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>or use <code><a href="../reference/tbl_check_column.html">tbl_grade_column()</a></code> in existing grading code.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r ex-check}</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this({</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="in">  pass_if_equal()</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="in">  tbl_grade_column()</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="in">  pass()</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
</li>
<li>
<p>If the solution is a <strong>vector</strong>, use
<code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r ex-check}</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this_vector()</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>or use <code><a href="../reference/vec_check.html">vec_grade()</a></code> in existing grading code.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r ex-check}</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this({</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="in">  pass_if_equal()</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="in">  vec_grade()</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="in">  pass()</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
</li>
</ul>
<p>In each of the above cases, the fully automated first version is
functionally equivalent to the second version that uses
<code><a href="https://pkgs.rstudio.com/gradethis/reference/grade_this.html" class="external-link">gradethis::grade_this()</a></code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="grading-tables">Grading tables<a class="anchor" aria-label="anchor" href="#grading-tables"></a>
</h2>
<div class="section level3">
<h3 id="automated-table-checking">Automated table checking<a class="anchor" aria-label="anchor" href="#automated-table-checking"></a>
</h3>
<p><code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> uses <code><a href="../reference/tbl_check.html">tbl_grade()</a></code> to
compare the result of the user’s input to the result of the
<code>-solution</code> chunk, automatically returning targeted feedback
to the user if any problems are discovered.</p>
<p><code><a href="../reference/tbl_check.html">tbl_grade()</a></code> checks that the user’s table</p>
<ol style="list-style-type: decimal">
<li>is the correct class,</li>
<li>has the correct column names,</li>
<li>has the correct number of rows and columns,</li>
<li>and that each column of the user’s table
<ol style="list-style-type: decimal">
<li>is the correct class and</li>
<li>contains the correct values.</li>
</ol>
</li>
</ol>
<p>If any of these checks detect a problem in the submitted code, the
student will see a single message with the first detected issue, based
on the order described above.</p>
</div>
<div class="section level3">
<h3 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a>
</h3>
<p>To grade an exercise where the solution is a table, ensure you have a
<code>-solution</code> chunk and call <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> in
your <code>-check</code> chunk</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r example-check}</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this_table()</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>or add <code><a href="../reference/tbl_check.html">tbl_grade()</a></code> to the grading code in your
<code>-check</code> chunk.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r example-check}</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this({</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="in">  pass_if_equal()</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="in">  tbl_grade()</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="in">  pass()</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>By default, <code>tblcheck</code> functions compare the
<code>gradethis</code> objects <code>.result</code> and
<code>.solution</code>, just like
<code><a href="https://pkgs.rstudio.com/gradethis/reference/pass_if_equal.html" class="external-link">gradethis::pass_if_equal()</a></code> and
<code><a href="https://pkgs.rstudio.com/gradethis/reference/pass_if_equal.html" class="external-link">gradethis::fail_if_equal()</a></code>.</p>
<div class="callout">
<p>If you are using <code><a href="../reference/tbl_check.html">tbl_grade()</a></code>, be sure to include a
function like <code>pass()</code> or <code>pass_if_equal()</code> in
your checking code to ensure students can get a passing grade!</p>
<p><code><a href="../reference/tbl_check.html">tbl_grade()</a></code> only returns feedback to the student if it
discovers a problem; if the student gives the correct answer, it
produces no output. This lets you quickly check for simple problems,
following up with more detailed checking with other
<code>gradethis</code> functions.</p>
</div>
</div>
<div class="section level3">
<h3 id="finding-problems">Finding problems<a class="anchor" aria-label="anchor" href="#finding-problems"></a>
</h3>
<p>If the user’s submitted table differs from the correct table,
<code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> returns a failing grade and a message
with an explanation for what went wrong. If there are multiple problems
with a student’s submission, <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> tries to
give the most actionable item first.</p>
<p>We’ll demonstrate how this works for a simple exercise that asks
students to create the following table using <code>tibble()</code>.</p>
<table class="table">
<thead><tr class="header">
<th align="left">food</th>
<th align="left">vegetable</th>
<th align="left">color</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">lettuce</td>
<td align="left">TRUE</td>
<td align="left">green</td>
</tr>
<tr class="even">
<td align="left">tomato</td>
<td align="left">FALSE</td>
<td align="left">red</td>
</tr>
</tbody>
</table>
<p>In the R Markdown source of the learnr tutorial, we use an exercise
chunk labelled <code>food</code>, with a <code>food-solution</code>
chunk with the expected solution and a <code>food-check</code> chunk
with the exercise checking code using <a href="https://pkgs.rstudio.com/gradethis/" class="external-link">gradethis</a> and
tblcheck.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food, exercise=TRUE}</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food-solution}</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="in">tibble(</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="in">    food = c("lettuce", "tomato"),</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="in">    vegetable = c(TRUE, FALSE),</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="in">    color = c("green", "red")</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food-check}</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this_table()</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>We’ll use this example throughout the sections that follow to
demonstrate how tblcheck will respond to various types of errors that
students may make. Keep in mind this is a contrived example designed for
this vignette. In real-world usage, students are likely to only
encounter one or two of the problems <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> is
designed to find.</p>
<div class="section level4">
<h4 id="checking-class">Checking class<a class="anchor" aria-label="anchor" href="#checking-class"></a>
</h4>
<p>First, <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> ensures that the class of the
student’s submission matches the class of the expected solution. Here,
the student attempts to store the data in the table as a list rather
than by using <code>tibble()</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    food <span class="op">=</span> <span class="st">"lettuce"</span>,</span>
<span>    fruit <span class="op">=</span> <span class="st">"TRUE"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"green"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; $food</span></span>
<span><span class="co">#&gt; [1] "lettuce"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fruit</span></span>
<span><span class="co">#&gt; [1] "TRUE"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $color</span></span>
<span><span class="co">#&gt; [1] "green"</span></span></code></pre></div>
<div class="alert alert-danger">
Your table should be a tibble (class <code>tbl_df</code>), but it is a
list (class <code>list</code>).
</div>
<p>Based on this advice, the student revises their solution to use
<code>tibble()</code> instead of <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>.</p>
</div>
<div class="section level4">
<h4 id="checking-column-names">Checking column names<a class="anchor" aria-label="anchor" href="#checking-column-names"></a>
</h4>
<p>Next, the code checks that the student used the correct column names,
and they haven’t missed any columns or included any unexpected columns.
Here, <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> notices that the student has an
unexpected column named <code>fruit</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span></span>
<span>    food <span class="op">=</span> <span class="st">"lettuce"</span>,</span>
<span>    fruit <span class="op">=</span> <span class="st">"TRUE"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"green"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   food    fruit color</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> lettuce TRUE  green</span></span></code></pre></div>
<div class="alert alert-danger">
Your table should have a column named <code>vegetable</code>. Your table
should not have a column named <code>fruit</code>.
</div>
<p>Based on this advice, the student revises their solution to name the
second column <code>vegetable</code> instead of <code>fruit</code>.</p>
</div>
<div class="section level4">
<h4 id="checking-length">Checking length<a class="anchor" aria-label="anchor" href="#checking-length"></a>
</h4>
<p>Next, <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> checks that the student has
submitted the correct number of rows, and in this case notices that the
student has only included one row.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span></span>
<span>    food <span class="op">=</span> <span class="st">"lettuce"</span>,</span>
<span>    vegetable <span class="op">=</span> <span class="st">"TRUE"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"green"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   food    vegetable color</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> lettuce TRUE      green</span></span></code></pre></div>
<div class="alert alert-danger">
Your table should have 2 rows, but it has 1 row.
</div>
<p>Based on this advice, the student realizes they’ve only entered the
first row of the table. They go back to the example table and add the
second row to their submission.</p>
</div>
<div class="section level4">
<h4 id="checking-column-classes">Checking column classes<a class="anchor" aria-label="anchor" href="#checking-column-classes"></a>
</h4>
<p>Next, <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> checks that each individual
column contains the correct type of data. Here, the student has stored
the values of the <code>vegetable</code> column as a string, but we were
expecting them to be logical values.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span></span>
<span>    food <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lettuce"</span>, <span class="st">"tomato"</span><span class="op">)</span>,</span>
<span>    vegetable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRUE"</span>, <span class="st">"TRUE"</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"green"</span>, <span class="st">"red"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt;   food    vegetable color</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> lettuce TRUE      green</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> tomato  TRUE      red</span></span></code></pre></div>
<div class="alert alert-danger">
Your <code>vegetable</code> column should be a vector of
<code>TRUE</code>/<code>FALSE</code> values (class
<code>logical</code>), but it is a vector of text (class
<code>character</code>).
</div>
<p>Based on this advice, the student removes the <code>"</code> around
the values in the <code>vegetable</code> column to use R’s logical
<code>TRUE</code>.</p>
</div>
<div class="section level4">
<h4 id="checking-column-values">Checking column values<a class="anchor" aria-label="anchor" href="#checking-column-values"></a>
</h4>
<p>Finally, <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> gives a hint as to what the
values in each column should look like. Here, the student made a mistake
during their transcription of the <code>vegetable</code> column.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span></span>
<span>    food <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lettuce"</span>, <span class="st">"tomato"</span><span class="op">)</span>,</span>
<span>    vegetable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"green"</span>, <span class="st">"red"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt;   food    vegetable color</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> lettuce TRUE      green</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> tomato  TRUE      red</span></span></code></pre></div>
<div class="alert alert-danger">
The first 2 values of your <code>vegetable</code> column should be
<code>TRUE</code> and <code>FALSE</code>, not <code>TRUE</code> and
<code>TRUE</code>.
</div>
<p>Based on this advice, the student revises their submission, changing
the second value of the <code>vegetable</code> column from
<code>TRUE</code> to <code>FALSE</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span></span>
<span>    food <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lettuce"</span>, <span class="st">"tomato"</span><span class="op">)</span>,</span>
<span>    vegetable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"green"</span>, <span class="st">"red"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt;   food    vegetable color</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> lettuce TRUE      green</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> tomato  FALSE     red</span></span></code></pre></div>
<div class="alert alert-success">
That’s a first-class answer! Correct!
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="grading-vectors">Grading vectors<a class="anchor" aria-label="anchor" href="#grading-vectors"></a>
</h2>
<div class="section level3">
<h3 id="automated-vector-checking">Automated vector checking<a class="anchor" aria-label="anchor" href="#automated-vector-checking"></a>
</h3>
<p>Many of the table-grading tests that apply to the <em>columns</em> of
tables can also be applied to vectors — after all, data frame columns in
R are <em>vectors</em>.</p>
<p>When your exercise uses vectors rather than tables,
<code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code> and <code><a href="../reference/vec_check.html">vec_grade()</a></code> allows you
to apply the same tests that are normally applied to the columns of a
table to a vector. They check that the user’s vector</p>
<ol style="list-style-type: decimal">
<li>is the correct class</li>
<li>is the correct length</li>
<li>has the correct factor levels (if the vector is a factor)</li>
<li>contains the correct values</li>
<li>has the correct names (if the vector has names)</li>
</ol>
<p>Like <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code>, if a problem is detected by any
of these checks, the student will see a single message with the first
detected problem, based on the order described above.</p>
</div>
<div class="section level3">
<h3 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a>
</h3>
<p>To grade an exercise where the solution is a vector, ensure you have
a <code>-solution</code> chunk and call <code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code>
in your <code>-check</code> chunk</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r vector-check}</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this_vector()</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>or add <code><a href="../reference/vec_check.html">vec_grade()</a></code> to the grading code in your
<code>-check</code> chunk, e.g.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r vector-check}</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this({</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="in">  pass_if_equal()</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="in">  vec_grade()</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="in">  pass()</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="callout">
<p>Just like <code><a href="../reference/tbl_check.html">tbl_grade()</a></code> and other tblcheck functions,
<code><a href="../reference/vec_check.html">vec_grade()</a></code> automatically compares the user’s
<code>.result</code> to the <code>.solution</code> when used in
<code><a href="https://pkgs.rstudio.com/gradethis/reference/grade_this.html" class="external-link">gradethis::grade_this()</a></code>.</p>
<p>While <code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code> always returns a passing or
failing grade, note that <code><a href="../reference/vec_check.html">vec_grade()</a></code> only returns feedback
when a problem is detected. Be sure to include
<code><a href="https://pkgs.rstudio.com/gradethis/reference/graded.html" class="external-link">gradethis::pass()</a></code> or
<code><a href="https://pkgs.rstudio.com/gradethis/reference/pass_if_equal.html" class="external-link">gradethis::pass_if_equal()</a></code> when using
<code><a href="../reference/vec_check.html">vec_grade()</a></code> to ensure that students can get a passing
grade.</p>
</div>
</div>
<div class="section level3">
<h3 id="finding-problems-1">Finding problems<a class="anchor" aria-label="anchor" href="#finding-problems-1"></a>
</h3>
<p>If the user’s submitted vector differs from the correct vector,
<code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code> returns a failing grade and a message
with an explanation for what went wrong. If there are multiple problems
with a student’s submission, <code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code> tries to
give the most actionable item first.</p>
<p>Suppose an exercise asks a student to create a factor of the sandwich
toppings — <em>lettuce</em>, <em>tomato</em>, <em>avocado</em>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lettuce"</span>, <span class="st">"tomato"</span>, <span class="st">"avocado"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] lettuce tomato  avocado</span></span>
<span><span class="co">#&gt; Levels: avocado lettuce tomato</span></span></code></pre></div>
<p>In the R Markdown source of the learnr tutorial, we use an exercise
chunk labelled <code>toppings</code>, with a
<code>toppings-solution</code> chunk with the expected solution and a
<code>toppings-check</code> chunk with the exercise checking code using
<a href="https://pkgs.rstudio.com/gradethis/" class="external-link">gradethis</a> and
tblcheck.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r toppings, exercise=TRUE}</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="in">```{r toppings-solution}</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="in">factor(c("lettuce", "tomato", "avocado"))</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="in">```{r toppings-check}</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this_vector()</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>For example, if the student submits a vector of the wrong class, that
will be the first message returned by
<code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lettuce"</span>, <span class="st">"tomato"</span>, <span class="st">"avocado"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "lettuce" "tomato"  "avocado"</span></span></code></pre></div>
<div class="alert alert-danger">
Your result should be a vector of factors (class <code>factor</code>),
but it is a vector of text (class <code>character</code>).
</div>
<p>If the student submits a factor with the wrong factor levels,
<code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code> will warn the student about their
mistake.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lettuce"</span>, <span class="st">"tomato"</span>, <span class="st">"avocado"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lettuce"</span>, <span class="st">"tomato"</span>, <span class="st">"avocado"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] lettuce tomato  avocado</span></span>
<span><span class="co">#&gt; Levels: lettuce tomato avocado</span></span></code></pre></div>
<div class="alert alert-danger">
Your result’s levels were not in the expected order. The first 3 levels
of your result should be <code>avocado</code>, <code>lettuce</code>, and
<code>tomato</code>, but they were <code>lettuce</code>,
<code>tomato</code>, and <code>avocado</code>.
</div>
</div>
</div>
<div class="section level2">
<h2 id="custom-grading">Custom Grading<a class="anchor" aria-label="anchor" href="#custom-grading"></a>
</h2>
<p>There are a number of ways to control which mistakes are detected and
how the feedback is given to the students.</p>
<ul>
<li><p>The first is to <a href="#skipping-tests">enable or disable
specific checks</a> using the <code>check_*</code> arguments of
<code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> and <code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code> (or
their counterparts, <code><a href="../reference/tbl_check.html">tbl_grade()</a></code> and
<code><a href="../reference/vec_check.html">vec_grade()</a></code>).</p></li>
<li><p>Both <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> and
<code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code> include <code>pre_check</code> and
<code>post_check</code> options that allow you to add <a href="#additional-checks">additional tests and logic to the grading
code</a>.</p></li>
<li><p>You may also choose to <a href="#specific-grading-functions">call
specific grading functions</a> associated with the checks underlying
<code><a href="../reference/tbl_check.html">tbl_grade()</a></code> and <code><a href="../reference/vec_check.html">vec_grade()</a></code>.</p></li>
<li><p>Or you can <a href="#checking-for-problems-with-custom-feedback"><code>check</code>
rather than <code>grade</code> for specific problems</a> to obtain a
<code>problem</code> object, i.e. a description of the problem found by
tblcheck. You can then use the problem object to construct a feedback
message using <code><a href="https://pkgs.rstudio.com/gradethis/reference/graded.html" class="external-link">gradethis::fail()</a></code>.</p></li>
</ul>
<div class="section level3">
<h3 id="skipping-tests">Skipping tests<a class="anchor" aria-label="anchor" href="#skipping-tests"></a>
</h3>
<p>Every test performed by <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> and
<code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code> (or <code><a href="../reference/tbl_check.html">tbl_grade()</a></code> and
<code><a href="../reference/vec_check.html">vec_grade()</a></code>) can be enabled or disabled with an argument.
The argument names are prefixed with <code>check_</code> — such as
<code>check_class</code> or <code>check_groups</code> — and each take a
<code>TRUE</code> or <code>FALSE</code> value.</p>
<p>For example, suppose a student answering our <code>food</code>
exercise used a <code>data.frame</code> when the exercise expects a
<code>tibble</code>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    food <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lettuce"</span>, <span class="st">"tomato"</span><span class="op">)</span>,</span>
<span>    vegetable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"green"</span>, <span class="st">"red"</span><span class="op">)</span>,</span>
<span>    stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;      food vegetable color</span></span>
<span><span class="co">#&gt; 1 lettuce      TRUE green</span></span>
<span><span class="co">#&gt; 2  tomato     FALSE   red</span></span></code></pre></div>
<div class="alert alert-danger">
Your table should be a tibble (class <code>tbl_df</code>), but it is a
data frame (class <code>data.frame</code>).
</div>
<p>If you don’t care about the class of the table, you can add
<code>check_class = FALSE</code> to <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code>.
This will skip checking the table’s class, but still run all other
tests.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food-check}</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this_table(check_class = FALSE)</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="alert alert-success">
Super job! Correct!
</div>
<p>Since the only problem with the student’s submission was the class of
the table, <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> doesn’t directly return any
feedback.</p>
</div>
<div class="section level3">
<h3 id="additional-checks">Additional Checks<a class="anchor" aria-label="anchor" href="#additional-checks"></a>
</h3>
<p>Both <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code> and
<code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code> provide two additional arguments,
<code>pre_check</code> and <code>post_check</code>, that allow you to
add additional checks or modify the <code>.result</code> or
<code>.solution</code>.</p>
<p>For both functions, the <code><a href="https://pkgs.rstudio.com/gradethis/reference/grade_this.html" class="external-link">gradethis::grade_this()</a></code> flow is
roughly equivalent to the following code sketch:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">grade_this</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="co"># ... pre_check ...</span></span>
<span>  </span>
<span>  <span class="co"># if requested</span></span>
<span>  <span class="fu">pass_if_equal</span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># grade the table or vector</span></span>
<span>  <span class="fu"><a href="../reference/tbl_check.html">tbl_grade</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># ... post_check ...</span></span>
<span>  </span>
<span>  <span class="fu">pass</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Two examples of reasons why you might want to use these arguments are
to limit the table grading checks to specific columns only, or to
include additional checks after <code><a href="../reference/tbl_check.html">tbl_grade()</a></code> or
<code><a href="../reference/vec_check.html">vec_grade()</a></code>.</p>
<p>Suppose we extend our <code>food</code> example into an exercise
labelled <code>food-percentage</code> that adds a <code>count</code>
column to our <code>foods</code> table and asks students to add a new
column, <code>pct</code> with the percentage of our total food is
represented by each food.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food-percentage-setup}</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="in">foods &lt;- tibble(</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="in">    food = c("lettuce", "tomato"),</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="in">    vegetable = c(TRUE, FALSE),</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="in">    color = c("green", "red"),</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="in">    count = c(5, 3)</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food-percentage, exercise=TRUE}</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food-percentage-solution}</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="in">.solution &lt;-</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="in">    foods %&gt;%</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="in">    mutate(pct = count / sum(count))</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>We expect the final solution to look like this</p>
<p>but a student might decide to store the total food in a temporary
<code>total</code> column.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">.result</span> <span class="op">&lt;-</span> <span class="va">foods</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span>,</span>
<span>        pct <span class="op">=</span> <span class="va">count</span> <span class="op">/</span> <span class="va">total</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>Knowing that we don’t mind the additional column, we can use the
<code>pre_check</code> argument to limit <code>.result</code> to the
columns that also appear in <code>.solution</code>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">grade_this_table</span>(<span class="at">pre_check =</span> {</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tbl_grade_is_table</span>(.result)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    .result <span class="ot">&lt;-</span> .result[<span class="fu">intersect</span>(<span class="fu">names</span>(.result), <span class="fu">names</span>(.solution))]</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="alert alert-success">
Awesome! Correct!
</div>
</div>
<div class="section level3">
<h3 id="specific-grading-functions">Specific grading functions<a class="anchor" aria-label="anchor" href="#specific-grading-functions"></a>
</h3>
<p><code><a href="../reference/tbl_check.html">tbl_grade()</a></code> and <code><a href="../reference/vec_check.html">vec_grade()</a></code> calls a number
of grading functions internally. You can call these functions directly
to perform more specific grading, either in the <code>pre_check</code>
or <code>post_check</code> arguments of <code><a href="../reference/grade_this_table.html">grade_this_table()</a></code>
or <code><a href="../reference/grade_this_vector.html">grade_this_vector()</a></code>, or in standard
<code><a href="https://pkgs.rstudio.com/gradethis/reference/grade_this.html" class="external-link">gradethis::grade_this()</a></code> grading code.</p>
<table class="table">
<colgroup>
<col width="43%">
<col width="56%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Grades</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code><a href="../reference/tbl_check_class.html">tbl_grade_class()</a></code> <code><a href="../reference/tbl_check_class.html">vec_grade_class()</a></code>
</td>
<td>the class of an object</td>
</tr>
<tr class="even">
<td><code><a href="../reference/tbl_check_column.html">tbl_grade_column()</a></code></td>
<td>applies the tests in <code><a href="../reference/vec_check.html">vec_grade()</a></code> to a single column of
a table</td>
</tr>
<tr class="odd">
<td>
<code><a href="../reference/tbl_check_dimensions.html">tbl_grade_dimensions()</a></code>
<code><a href="../reference/tbl_check_dimensions.html">vec_grade_dimensions()</a></code>
</td>
<td>the length and dimensions of an object</td>
</tr>
<tr class="even">
<td><code><a href="../reference/tbl_check_groups.html">tbl_grade_groups()</a></code></td>
<td>the groups of a table</td>
</tr>
<tr class="odd">
<td>
<code><a href="../reference/tbl_check_names.html">tbl_grade_names()</a></code> <code><a href="../reference/tbl_check_names.html">vec_grade_names()</a></code>
</td>
<td>the names of an object</td>
</tr>
<tr class="even">
<td><code><a href="../reference/vec_check_levels.html">vec_grade_levels()</a></code></td>
<td>the levels of a factor</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/vec_check_values.html">vec_grade_values()</a></code></td>
<td>the values of a vector</td>
</tr>
</tbody>
</table>
<p>Suppose we modified our <code>food</code> example, telling students
that we have 3 tomatoes and 5 heads of lettuce. We’d like the students
to create a fourth column <code>count</code> containing the number of
each food item in our possession. For this example, we’ll use the
lower-level functions in conjunction with
<code><a href="https://pkgs.rstudio.com/gradethis/reference/grade_this.html" class="external-link">gradethis::grade_this()</a></code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food-count-setup}</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="in">foods &lt;- tibble(</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="in">    food = c("lettuce", "tomato"),</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="in">    vegetable = c(TRUE, FALSE),</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="in">    color = c("green", "red")</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food-count, exercise=TRUE}</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food-count-solution}</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="in">foods %&gt;%</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="in">    mutate(count = c(5, 3))</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>In our grading code, we may choose to grade only the
<code>count</code> column of <code>foods</code> using
<code><a href="../reference/tbl_check_column.html">tbl_grade_column()</a></code>, ignoring the other columns since they
were provided by our setup code.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food-count-check}</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this({</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="in">  tbl_grade_column("count")</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="in">  pass_if_equal()</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="in">  fail()</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>A student who quickly scanned the exercise prompt might reverse the
expected order of the values in the <code>count</code> column.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foods</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">#&gt;   food    vegetable color count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> lettuce TRUE      green     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> tomato  FALSE     red       5</span></span></code></pre></div>
<div class="alert alert-danger">
The first 2 values of your <code>count</code> column should be
<code>5</code> and <code>3</code>, not <code>3</code> and
<code>5</code>.
</div>
</div>
<div class="section level3">
<h3 id="custom-mistake-handling">Custom mistake handling<a class="anchor" aria-label="anchor" href="#custom-mistake-handling"></a>
</h3>
<p>Sometimes, we want to handle specific circumstance in a special way.
Every <code>tbl_grade_</code> and <code>vec_grade_</code> function
includes a <code>tbl_check_</code> or <code>vec_check_</code>
counterpart that returns the detected <strong>problem</strong> rather
than converting the problem into feedback for the user (a
<strong>grade</strong> in gradethis terms).</p>
<p>If we replace <code><a href="../reference/tbl_check_column.html">tbl_grade_column()</a></code> with
<code><a href="../reference/tbl_check_column.html">tbl_check_column()</a></code>, we can store and inspect the problem
detected by the column checking function. We’ll experiment in our local
R console before writing our final exercise checking code.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">solution</span> <span class="op">&lt;-</span> <span class="va">foods</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">mutate</span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">user</span> <span class="op">&lt;-</span> <span class="va">foods</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">mutate</span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">problem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tbl_check_column.html">tbl_check_column</a></span><span class="op">(</span><span class="st">"count"</span>, object <span class="op">=</span> <span class="va">user</span>, expected <span class="op">=</span> <span class="va">solution</span><span class="op">)</span></span>
<span></span>
<span><span class="va">problem</span></span>
<span><span class="co">#&gt; &lt;tblcheck problem&gt;</span></span>
<span><span class="co">#&gt; The first 2 values of your `count` column should be `5` and `3`, not `3` and `5`.</span></span>
<span><span class="co">#&gt; $ type    : chr "values"</span></span>
<span><span class="co">#&gt; $ expected: num [1:2] 5 3</span></span>
<span><span class="co">#&gt; $ actual  : num [1:2] 3 5</span></span>
<span><span class="co">#&gt; $ location: chr "column"</span></span>
<span><span class="co">#&gt; $ column  : chr "count"</span></span></code></pre></div>
<p>Every problem object contains at least three items:</p>
<ol style="list-style-type: decimal">
<li>
<p>The problem <code>type</code> describes the issue discovered by
the checking function. The help pages for every check function contain a
section named <strong>Problems</strong> where the problem types detected
by the check function are enumerated.</p>
<ul>
<li>
<strong>Your Turn:</strong> What types of problems are discovered by
<code><a href="../reference/tbl_check_column.html">tbl_check_column()</a></code>? Use the help pages to find out.</li>
</ul>
</li>
<li><p><code>actual</code> contains the value returned by the user’s
code and inspected by the check function.</p></li>
<li><p><code>expected</code> contains the value returned by the solution
code and inspected by the check function.</p></li>
</ol>
<p>Problems also include additional information depending on the problem
type. In the case of a <code>values</code> problem detected by
<code><a href="../reference/tbl_check_column.html">tbl_check_column()</a></code>, the problem object also includes the
<code>column</code> name.</p>
<p>tblcheck includes a helper function, <code><a href="../reference/problem_type.html">is_problem()</a></code> that
you can use to detect and differentiate between different problem
types.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/problem_type.html">is_problem</a></span><span class="op">(</span><span class="va">problem</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>We can use the <code>type</code> argument of
<code><a href="../reference/problem_type.html">is_problem()</a></code> to differentiate between the problem types
detected by <code><a href="../reference/tbl_check_column.html">tbl_check_column()</a></code>.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/problem_type.html">is_problem</a></span><span class="op">(</span><span class="va">problem</span>, type <span class="op">=</span> <span class="st">"length"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="fu"><a href="../reference/problem_type.html">is_problem</a></span><span class="op">(</span><span class="va">problem</span>, type <span class="op">=</span> <span class="st">"values"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>In this exercise, we know in advance that our wording is likely to
trip up students, so we may want to create feedback specifically for the
case where a student has reversed the food counts. We can use
<code><a href="../reference/problem_type.html">is_problem()</a></code> together with <code><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal()</a></code> to
isolate this specific case.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/problem_type.html">is_problem</a></span><span class="op">(</span><span class="va">problem</span>, <span class="st">"values"</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">problem</span><span class="op">$</span><span class="va">actual</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">feedback</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>        <span class="st">"Make sure that the values in `count` are ordered"</span>,</span>
<span>        <span class="st">"to match their respective `food`."</span>,</span>
<span>        <span class="st">"Remember, we have **3** tomatoes and **5** heads of lettuce."</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="fu">gradethis</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/gradethis/reference/graded.html" class="external-link">fail</a></span><span class="op">(</span><span class="va">feedback</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; &lt;gradethis_graded: [Incorrect]</span></span>
<span><span class="co">#&gt;   Make sure that the values in `count` are ordered to match</span></span>
<span><span class="co">#&gt;   their respective `food`. Remember, we have **3** tomatoes</span></span>
<span><span class="co">#&gt;   and **5** heads of lettuce.</span></span>
<span><span class="co">#&gt; &gt;</span></span></code></pre></div>
<p>For problems not handled by your custom grading code, you can pass
the problem to <code><a href="../reference/tbl_check.html">tbl_grade()</a></code> to create a grade with the
default feedback provided by tblcheck’s <code>grade</code> functions. If
there are no problems, <code>problem_grade(problem)</code> won’t return
anything.</p>
<p>Here’s the default feedback <code><a href="../reference/tbl_check_column.html">tbl_grade_column()</a></code> <em>would
have returned</em> without our custom grading code.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/problem_grade.html">problem_grade</a></span><span class="op">(</span><span class="va">problem</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;gradethis_graded: [Incorrect]</span></span>
<span><span class="co">#&gt;   The first 2 values of your `count` column should be `5` and</span></span>
<span><span class="co">#&gt;   `3`, not `3` and `5`.</span></span>
<span><span class="co">#&gt; &gt;</span></span></code></pre></div>
<p><strong>Tip</strong>: You can also use <code>if</code> statements to
ignore differences that you don’t care about in your grading code.</p>
<p>Putting everything together into our grading
<code>food-count-check</code> chunk, our grading code for this exercise
would look like this:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r food-count-check}</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="in">grade_this({</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="in">  problem &lt;- tbl_check_column("count")</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="in">  if (is_problem(problem, "values") &amp;&amp; all.equal(problem$actual, c(3, 5))) {</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="in">    feedback &lt;- paste(</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="in">        "Make sure that the values in `count` are ordered",</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="in">        "to match their respective `food`.",</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="in">        "Remember, we have **3** tomatoes and **5** heads of lettuce."</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="in">    )</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="in">    fail(feedback)</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="in">  problem_grade(problem)</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="in">  pass("Great job!")</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>And the student who reversed the <code>count</code> column values</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foods</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">#&gt;   food    vegetable color count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> lettuce TRUE      green     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> tomato  FALSE     red       5</span></span></code></pre></div>
<p>would receive our custom feedback.</p>
<div class="alert alert-danger">
Make sure that the values in <code>count</code> are ordered to match
their respective <code>food</code>. Remember, we have <strong>3</strong>
tomatoes and <strong>5</strong> heads of lettuce.
</div>
<p>By following our specific advice, the student revises their code to
correctly create the <code>count</code> column.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foods</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">#&gt;   food    vegetable color count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> lettuce TRUE      green     5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> tomato  FALSE     red       3</span></span></code></pre></div>
<div class="alert alert-success">
Great job!
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>tblcheck is built for use with <a href="https://rstudio.github.io/learnr" class="external-link">learnr</a> interactive tutorials.</p>
<p>learnr is a part of the <strong>R Markdown</strong> ecosystem of packages for creating computational documents in R. Learn more at <a href="https://rmarkdown.rstudio.com/" class="external-link">rmarkdown.rstudio.com</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Developed by Alexander Rossell Hayes, <a href="https://www.garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>, RStudio, PBC.</p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer>
</body>
</html>
